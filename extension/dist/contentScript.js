(()=>{"use strict";function e(e,t,n){e.querySelectorAll("li").forEach((function(e,t){e.style.backgroundColor=t===n?"#f0f0f0":""}))}function t(e){e&&e.parentNode===document.body&&document.body.removeChild(e)}var n={foo:["bar","baz","qux"],helo:["hello","Help","Hell"],heldp:["help","held","hello"]};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,i(o.key),o)}}function i(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:String(t)}var l=new(function(){function o(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=this,(t=i(t="focusedInput"))in e?Object.defineProperty(e,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):e[t]=null,this.replaceDictionary=n}var l,u;return l=o,(u=[{key:"isInputElement",value:function(e){return"INPUT"===e.tagName&&"hidden"!==e.type}},{key:"isTextAreaElement",value:function(e){return"TEXTAREA"===e.tagName}},{key:"isContentEditableElement",value:function(e){return e.isContentEditable}},{key:"getSuggestions",value:function(e){var t=e.toLowerCase();return this.replaceDictionary[t]||[]}},{key:"handleFocusedElement",value:function(e){var t=e.target;(this.isInputElement(t)||this.isTextAreaElement(t)||this.isContentEditableElement(t))&&(this.focusedInput=t,t.removeEventListener("keydown",this.handleKeyDown),t.addEventListener("keydown",this.handleKeyDown.bind(this)))}},{key:"handleKeyDown",value:function(e){var n=e.target,o=[];if(" "===e.key){var r=function(e){var t="";e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement?t=e.value:e.isContentEditable&&(t=e.innerText);var n=t.split(/\s+/);return n[n.length-1]}(n);(o=this.getSuggestions(r)).length>0&&this.showSuggestions(o,n)}else if("Enter"===e.key){var i=document.querySelector(".suggestions-popup");void 0!==(null==i?void 0:i.dataset.selectedIndex)&&this.focusedInput&&t(i)}}},{key:"showSuggestions",value:function(n,o){var r=this,i=document.querySelector(".suggestions-popup");if(i)e(i.querySelector("ul"),0,-1);else{i=function(e,t){var n=document.createElement("div");n.className="suggestions-popup",n.style.position="absolute";var o=t.getBoundingClientRect();n.style.top="".concat(o.bottom,"px"),n.style.left="".concat(o.left,"px");var r=document.createElement("ul");return r.style.listStyleType="none",r.style.padding="0",e.forEach((function(e,t){var n=document.createElement("li");n.style.cursor="pointer",n.textContent=e,n.style.padding="10px 15px",n.style.borderBottom="1px solid #ccc",n.style.backgroundColor="#f8f8f8",n.style.transition="background-color 0.3s ease",n.addEventListener("mouseenter",(function(){n.style.backgroundColor="#f0f0f0"})),n.addEventListener("mouseleave",(function(){n.style.backgroundColor=""})),r.appendChild(n)})),n.appendChild(r),n.style.backgroundColor="#fff",n.style.border="1px solid #ccc",n.style.borderRadius="5px",n.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.2)",n.style.maxHeight="250px",n.style.overflowY="auto",n.style.zIndex="1000",document.body.appendChild(n),n}(n,o);var l=i.querySelector("ul"),u=-1,a=function(e){var o,l,a=n[u=e];if(null!==(o=r.focusedInput)&&void 0!==o&&o.isContentEditable){var s=r.focusedInput.innerHTML.split(" ");s[s.length-1]=a,r.focusedInput.textContent=s.join(" ")}else if(r.focusedInput){var c=r.focusedInput.value.split(" ");c[c.length-1]=a,r.focusedInput.value=c.join(" ")}t(i),null===(l=r.focusedInput)||void 0===l||l.focus()};l&&(l.setAttribute("tabindex","0"),l.focus(),l.addEventListener("keydown",(function(t){"ArrowUp"===t.key?(u=Math.max(u-1,0),e(l,0,u)):"ArrowDown"===t.key?(u=Math.min(u+1,n.length-1),e(l,0,u)):"Enter"===t.key&&a(u)})),l.addEventListener("click",(function(e){var t=Array.from(l.children).indexOf(e.target);a(t)})))}}}])&&r(l.prototype,u),Object.defineProperty(l,"prototype",{writable:!1}),o}());document.addEventListener("focus",l.handleFocusedElement.bind(l),!0)})();